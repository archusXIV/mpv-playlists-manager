#!/bin/bash
## This is a part of main script: mpm.

# shellcheck disable=SC2154
_ChooseFromPlay() {
    cd "$playlists_dir" || exit 1

    clear
    _TitlesListCompare

    [[ -f $CHOOSE1 ]] && rm "$CHOOSE1"

    read -rsn 1 -p "${info}"" [B]ack to menu, Play all items as [A]udio, [V]ideo or ${b}[S]elect:${nb} ""${nc}" choice
    case "$choice" in
        a|A) _LoadAudio -l ;;
        b|B) _Menu ;;
        v|V) _LoadVideo -l ;;
        s|S)
            __
            IFS=","; read -ra array -p "${info}"" Enter links numbers separeted by comma, eg: 3,1,5: ""${nc}"

            for i in "${array[@]}"; do
                ((i++))
                sed -n "${i}p" "$list" >> "$CHOOSE1"
            done

            # if we don't unset IFS all other functions will be messed up!
            unset IFS
            __
            read -rsn 1 -p "${info}"' load [A]udio, [V]ideo: '"${nc}" load
            case "$load" in
                a|A)
                    _LoadAudio -c
                ;;
                v|V)
                    clear
                    _LoadVideo -c
                ;;
            esac
            _Menu
        ;;
    esac
    _Menu
}

