#!/bin/bash
## This is a part of main script: mpm.

# shellcheck disable=SC2154
_GetCompleted() {

    cd "$main_dir" || exit 1

    if [[ -n $(find "$audios_dir" "$videos_dir" -name "*.part") ]]; then

        _IfPartsExist

    else

        _Prompt -n " ${info}Downloads completed, KEEP playlist?: ${nc}" && {
            echo " ${critical}Don't forget to save it as for future download.${nc}"
            sleep 3

            [[ -f "$QUEUE"_origin ]] && {
                mv -f "$QUEUE"_origin "$QUEUE"
                rm -f "$tmp_dir"/{DefaultTitles_origin,DefaultTitles}
            }

            cp -f "$AUDIO_URLS"_origin "$AUDIO_URLS"
            cp -f "$AUDIO_TITLES"_origin "$AUDIO_TITLES"
            _Menu
            
        }
        
        case "$1" in
            -a)
                if [[ -f "$QUEUE"_origin ]]; then
                    _Remove -q
                else
                    _Remove -a
                fi
            ;;
            -v)
                if [[ -f "$QUEUE"_origin ]]; then
                    _Remove -q
                else
                    _Remove -v
                fi
            ;;
        esac
    fi

}

